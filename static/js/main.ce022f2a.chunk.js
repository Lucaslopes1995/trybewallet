(this["webpackJsonpsd-0x-project-trybewallet"]=this["webpackJsonpsd-0x-project-trybewallet"]||[]).push([[0],{38:function(e,t,a){},49:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(20),o=a.n(l),c=a(23),i=(a(38),a(11)),s=a(13),u=a(31),d=a(32),p=a(1),m=a(18),h=a(14),v=a.n(h),b="sendUserData",E="FETCH_CURRENCIES_SUCCESS",f="FETCH_CURRENCIES_FAIL",y="add_spent",g="deleteElDespesa",j="LIBERAEDITDESPESA",O="ENVIAEDITDESPESA",x=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return{type:E,payload:{currencies:e,cotacao:t,valor:a}}},w=function(e){return{type:E,payload:e}},k=function(e){return{type:y,payload:e}},C={email:"",senha:""},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;return t.type===b?Object(p.a)(Object(p.a)({},e),{},{email:t.payload.email,senha:t.payload.senha}):e},F=a(19),D={currencies:"",eror:"",ask:0,valor:0,expenses:[]},R=function(){var e,t,a,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,l=arguments.length>1?arguments[1]:void 0;switch(l.type){case E:return Object(p.a)(Object(p.a)({},r),{},{currencies:l.payload.currencies});case f:return Object(p.a)(Object(p.a)({},r),{},{eror:l.payload});case y:return console.log((null===(e=r.expenses[r.expenses.length-1])||void 0===e?void 0:e.id)+1),Object(p.a)(Object(p.a)({},r),{},{ask:parseFloat(l.payload.cotacao)*parseFloat(l.payload.data.value)+parseFloat(r.ask),expenses:[].concat(Object(F.a)(r.expenses),[Object(p.a)(Object(p.a)({},l.payload.data),{},{id:(null===(t=r.expenses[r.expenses.length-1])||void 0===t?void 0:t.id)+1||0})])});case g:return console.log(l.payload.despesa.exchangeRates[l.payload.despesa.currency].ask),Object(p.a)(Object(p.a)({},r),{},{ask:parseFloat(r.ask)-parseFloat(l.payload.despesa.value)*l.payload.despesa.exchangeRates[l.payload.despesa.currency].ask,expenses:Object(F.a)(null===(a=l.payload)||void 0===a?void 0:a.a)});case j:return Object(p.a)(Object(p.a)({},r),{},{expenses:Object(F.a)(null===(n=l.payload)||void 0===n?void 0:n.a)});case O:return Object(p.a)(Object(p.a)({},r),{},{expenses:[].concat(Object(F.a)(l.payload.a),[l.payload.despesa]).sort((function(e,t){return e.id-t.id}))});default:return r}},A=Object(s.combineReducers)({user:S,wallet:R}),T=Object(s.createStore)(A,Object(d.composeWithDevTools)(Object(s.applyMiddleware)(u.a))),I=a(8),B=a(9),M=a(10),z=a(12),U=a(3),P=a(16),_=function(e){Object(M.a)(a,e);var t=Object(z.a)(a);function a(){var e;Object(I.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={email:"",senha:""},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(P.a)({},n,r))},e.validButton=function(){var t=e.state,a=t.email,n=t.senha,r=!0;return/^.+@.+\..+$/.test(a)&&n.length>=6&&(r=!1),r},e.handleSumit=function(t){var a=e.state,n=a.email,r=a.senha,l=e.props,o=l.login,c=l.history;t.preventDefault(),o({email:n,senha:r}),c.push("/trybewallet/carteira")},e}return Object(B.a)(a,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.senha,n=this.validButton();return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.handleSumit},r.a.createElement("label",{htmlFor:"email-home"},"Email",r.a.createElement("input",{name:"email",value:t,onChange:this.handleChange,type:"email","data-testid":"email-input",id:"email-home"})),r.a.createElement("label",{htmlFor:"senha-home"},"senha",r.a.createElement("input",{name:"senha",value:a,onChange:this.handleChange,type:"password","data-testid":"password-input",id:"senha-home"})),r.a.createElement("button",{type:"submit",disabled:n},"Entrar")))}}]),a}(r.a.Component),L=Object(i.b)(null,(function(e){return{login:function(t){e({type:b,payload:t})}}}))(_),V=function(e){Object(M.a)(a,e);var t=Object(z.a)(a);function a(){return Object(I.a)(this,a),t.apply(this,arguments)}return Object(B.a)(a,[{key:"render",value:function(){var e=this.props,t=e.email,a=e.gastos,n=null===a||void 0===a?void 0:a.reduce((function(e,t){return e+parseFloat(null===t||void 0===t?void 0:t.exchangeRates[[t.currency]].ask)*parseFloat(null===t||void 0===t?void 0:t.value)}),0);return r.a.createElement("header",null,r.a.createElement("span",{"data-testid":"email-field"},t),r.a.createElement("span",null,"Despesa Total "),r.a.createElement("span",{"data-testid":"total-field"},(null===n||void 0===n?void 0:n.toFixed(2))||0),r.a.createElement("span",{"data-testid":"header-currency-field"},"BRL"))}}]),a}(r.a.Component),N=Object(i.b)((function(e){return{email:e.user.email,gastos:e.wallet.expenses}}))(V),W=function(e){Object(M.a)(a,e);var t=Object(z.a)(a);function a(){return Object(I.a)(this,a),t.apply(this,arguments)}return Object(B.a)(a,[{key:"render",value:function(){var e=this.props,t=e.despesas,a=e.deleteDespesa,n=e.editSpent;return console.log(t),r.a.createElement("table",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Descri\xe7\xe3o"),r.a.createElement("th",null,"Tag"),r.a.createElement("th",null,"M\xe9todo de pagamento"),r.a.createElement("th",null,"Valor"),r.a.createElement("th",null,"Moeda"),r.a.createElement("th",null,"C\xe2mbio utilizado"),r.a.createElement("th",null,"Valor convertido"),r.a.createElement("th",null,"Moeda de convers\xe3o"),r.a.createElement("th",null,"Editar/Excluir")),null===t||void 0===t?void 0:t.map((function(e,l){return r.a.createElement("tr",{key:l+e.id},r.a.createElement("td",null,e.description),r.a.createElement("td",null,e.tag),r.a.createElement("td",null,e.method),r.a.createElement("td",null,parseFloat(e.value).toFixed(2)),r.a.createElement("td",null,e.exchangeRates[e.currency].name),r.a.createElement("td",null,parseFloat(e.exchangeRates[e.currency].ask).toFixed(2)),r.a.createElement("td",null,(parseFloat(e.exchangeRates[e.currency].ask)*parseFloat(e.value)).toFixed(2)),r.a.createElement("td",null,"Real"),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return n(e)},"data-testid":"edit-btn",type:"button"},"Editar"),r.a.createElement("button",{onClick:function(){return a(e,t)},"data-testid":"delete-btn",type:"button"},"Deletar")))})))}}]),a}(r.a.Component),q=Object(i.b)((function(e){return{despesas:e.wallet.expenses}}),(function(e){return{deleteDespesa:function(t,a){e(function(e,t){var a=t.filter((function(t){return t.id!==e.id}));return console.log(a),{type:g,payload:{despesa:e,a:a}}}(t,a))},editDespesa:function(t,a){e(function(e,t){return{type:j,payload:{despesa:e,a:t}}}(t,a))}}}))(W),G={value:"",description:"",currency:"",method:"",tag:"",exchangeRates:{},isEdit:!1,idAtualizar:100},H=function(e){Object(M.a)(a,e);var t=Object(z.a)(a);function a(){var e;Object(I.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state=G,e.fetchAPI=Object(m.a)(v.a.mark((function t(){var a,n,r,l,o=arguments;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=o.length>0&&void 0!==o[0]?o[0]:"",n=e.props.getcurrencies,r=e.state.value,t.next=5,n(a,r);case 5:return l=t.sent,t.abrupt("return",l);case 7:case"end":return t.stop()}}),t)}))),e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(P.a)({},n,r))},e.handleSubmit=function(t){t.preventDefault();var a=e.props,n=a.fetchGasto,r=a.gastos,l=e.state.isEdit;if(console.log(r),!l){var o=e.state;delete o.idAtualizar,delete o.isEdit,n(o),e.setState(Object(p.a)(Object(p.a)({},G),{},{isEdit:!1}))}},e.handleEditButton=function(t){t.preventDefault();var a=e.props,n=a.gastos,r=a.editaDespesa;if(e.state.isEdit){var l=e.state;return delete l.idAtualizar,delete l.isEdit,e.setState(Object(p.a)(Object(p.a)({},G),{},{isEdit:!1})),e.setState(Object(p.a)(Object(p.a)({},G),{},{isEdit:!1})),r(l,n)}},e.editSpent=function(t){e.setState(Object(p.a)(Object(p.a)({},t),{},{isEdit:!0,idAtualizar:t.id}))},e}return Object(B.a)(a,[{key:"componentDidMount",value:function(){this.fetchAPI()}},{key:"render",value:function(){var e=this,t=this.props.currencies,a=this.state,n=a.value,l=a.description,o=a.currency,c=a.method,i=a.tag;return r.a.createElement("div",null,r.a.createElement(N,null),r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("label",{htmlFor:"value"},"Valor",r.a.createElement("input",{required:!0,"data-testid":"value-input",name:"value",value:n,onChange:this.handleChange,id:"value"})),r.a.createElement("label",{htmlFor:"currency"},"Moeda",r.a.createElement("select",{required:!0,role:"combobox",id:"currency",value:o,onChange:function(t){return e.setState({currency:t.target.value})}},r.a.createElement("option",{hidden:!0},"Moeda"),t&&t.map((function(e,t){return r.a.createElement("option",{key:e+t},e)})))),r.a.createElement("select",{value:c,onChange:function(t){return e.setState({method:t.target.value})},"data-testid":"method-input"},r.a.createElement("option",{hidden:!0},"Forma de Pagamento"),r.a.createElement("option",null,"Dinheiro"),r.a.createElement("option",null,"Cart\xe3o de cr\xe9dito"),r.a.createElement("option",null,"Cart\xe3o de d\xe9bito")),r.a.createElement("select",{value:i,onChange:function(t){return e.setState({tag:t.target.value})},"data-testid":"tag-input"},r.a.createElement("option",{hidden:!0},"Tag"),r.a.createElement("option",null,"Alimenta\xe7\xe3o"),r.a.createElement("option",null,"Lazer"),r.a.createElement("option",null,"Trabalho"),r.a.createElement("option",null,"Transporte"),r.a.createElement("option",null,"Sa\xfade")),r.a.createElement("label",{htmlFor:"description"},"Descri\xe7\xe3o",r.a.createElement("input",{"data-testid":"description-input",name:"description",value:l,onChange:this.handleChange,id:"description"})),r.a.createElement("button",{type:"submit"},"Adicionar despesa"),r.a.createElement("button",{type:"button",onClick:this.handleEditButton},"Editar despesa"))),r.a.createElement(q,{editSpent:this.editSpent}))}}]),a}(r.a.Component),J=Object(i.b)((function(e){return{email:e.user.email,currencies:e.wallet.currencies,gastos:e.wallet.expenses}}),(function(e){return{getcurrencies:function(t,a){e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(){var a=Object(m.a)(v.a.mark((function a(n){var r,l,o,c,i;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,console.log(e),a.next=4,fetch("https://economia.awesomeapi.com.br/json/all");case 4:return r=a.sent,a.next=7,null===r||void 0===r?void 0:r.json();case 7:(l=a.sent)&&(delete l.USDT,o=Object.values(l).map((function(e){return e.code})),c=e&&l[e]||0,i=t||0,n(x(o,null===c||void 0===c?void 0:c.ask,i))),a.next=15;break;case 11:a.prev=11,a.t0=a.catch(0),n(w(a.t0)),console.log(a.t0);case 15:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(e){return a.apply(this,arguments)}}()}(t,a))},fetchGasto:function(t){e(function(e){return function(){var t=Object(m.a)(v.a.mark((function t(a){var n,r,l,o;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("https://economia.awesomeapi.com.br/json/all");case 3:return n=t.sent,t.next=6,null===n||void 0===n?void 0:n.json();case 6:(r=t.sent)&&(delete r.USDT,l=r[e.currency].ask||0,o={cotacao:l,data:Object(p.a)(Object(p.a)({},e),{},{exchangeRates:r})},a(k(o))),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),a(w(t.t0)),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}(t))},editaDespesa:function(t,a){e(function(e,t){var a=null===t||void 0===t?void 0:t.filter((function(t){return t.id!==e.id}));return{type:O,payload:{despesa:e,a:a}}}(t,a))}}}))(H),$=function(e){Object(M.a)(a,e);var t=Object(z.a)(a);function a(){var e;Object(I.a)(this,a);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=t.call.apply(t,[this].concat(l))).renderRoutes=function(){return r.a.createElement(U.c,null,r.a.createElement(U.a,{exact:!0,path:"/trybewallet/",component:L}),r.a.createElement(U.a,{exact:!0,path:"/trybewallet/carteira",component:J}),";")},e}return Object(B.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,this.renderRoutes())}}]),a}(r.a.Component),K=$;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(i.a,{store:T},r.a.createElement(c.a,null,r.a.createElement(K,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[49,1,2]]]);
//# sourceMappingURL=main.ce022f2a.chunk.js.map